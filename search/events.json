---
---

{
    "pages": [
        {%- assign specificCollection = site.communities | where_exp: "item", "item.path contains '/events/conferences' or item.path contains '/events/stack-x-meetups'"-%}
        {%- assign filteredCollection = specificCollection | where_exp: "item", "item.path contains 'overview' or item.path contains 'index'"-%}
        {%- assign sortedCollection = filteredCollection | where_exp: "item", "item.event_date" | sort : "event_date" -%}
        
        {%- for document in sortedCollection -%}
            {%- assign target_group_joined = document.target_group | join: ", " -%}
            {%- if document.url contains '/events/conference' -%}
                {
                "title": "{{ document.title | remove: '"' }}",
                "description": "{{ document.description | remove: '>' | remove: '"' | strip }}",
                "targetGroup": "{{ target_group_joined }}",
                "category": "Conference",
                "content": {{ document.content | strip_html | strip_newlines | strip | jsonify }},
                "url": "{{ document.url }}",
                "event_date": "{{ document.event_date | default: document.date }}",
                "meta": "document"
                },
            {%- else -%}
                {
                "title": "{{ document.title | remove: '"' }}",
                "description": "{{ document.description | remove: '>' | remove: '"' | strip }}",
                "targetGroup": "{{ target_group_joined }}",
                "category": "Stack-x Meetup",
                "content": {{ document.content | strip_html | strip_newlines | strip | jsonify }},
                "url": "{{ document.url }}",
                "event_date": "{{ document.event_date | default: document.date }}",
                "meta": "document"
                },
            {%- endif -%}

            {%- if forloop.last -%}{}{%- endif -%}
        {%- endfor -%}
    ]
}